{% layout 'theme' %}

<link rel="stylesheet" href="{{ 'bracelet-builder.css' | asset_url }}">
<script src="{{ 'bracelet-builder.js' | asset_url }}" defer></script>

<div class="bracelet-builder-page">
  <div class="builder-header">
    <a href="/" class="builder-back-home">â† Volver al inicio</a>
    <h1>âœ¨ Crea Tu Pulsera de EnsueÃ±o âœ¨</h1>
    <p>Â¡Selecciona tus dijes favoritos y observa cÃ³mo tu pulsera cobra vida!</p>
  </div>

  <div class="builder-container">
    <!-- Live Preview Section -->
    <div class="preview-section-full">
      <div class="preview-header">
        <h2>Tu Pulsera Personalizada</h2>
        <div class="preview-stats">
          <span><strong>Pulsera:</strong> <span id="braceletName">No seleccionada</span></span>
          <span><strong>Dijes:</strong> <span id="charmCount">0</span>/<span id="maxCharms">{{ settings.max_charms }}</span></span>
          <span class="price-display"><strong>Total:</strong> L<span id="totalPrice">0.00</span></span>
        </div>
      </div>
      
      <div class="bracelet-preview-container">
        <div class="bracelet-base">
          <div class="bracelet-links-strip" id="braceletLinksStrip">
            <!-- Empty slots will be generated here -->
          </div>
        </div>
      </div>
      
      <div class="preview-actions-bottom">
        <button class="btn btn-secondary" onclick="window.clearBracelet ? window.clearBracelet() : console.error('clearBracelet not defined')">ğŸ—‘ï¸ Limpiar Todo</button>
        <button class="btn btn-primary" onclick="window.addToCart ? window.addToCart() : console.error('addToCart not defined')" id="addToCartBtn">ğŸ›’ Agregar al Carrito</button>
      </div>
    </div>

    <!-- Charms Selection Section -->
    <div class="charms-section-bottom">
      <h2>Selecciona Tus Dijes</h2>
      <p class="charms-instruction">Haz clic o arrastra los dijes a la posiciÃ³n deseada en tu pulsera</p>
      
      <div class="bracelet-size-selector">
        <label for="braceletSize">TamaÃ±o de la Pulsera:</label>
        <select id="braceletSize">
          <option value="14">14 Dijes</option>
          <option value="16" selected>16 Dijes</option>
          <option value="18">18 Dijes</option>
        </select>
      </div>

      <div class="charms-grid" id="charmsGrid">
        <!-- Charms will be loaded here -->
      </div>
    </div>
  </div>
</div>
